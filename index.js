import{S as D,a as d,i as I,P as V,b as j,N as G,c as Y}from"./assets/vendor-B8egMXlJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-menu]"),t=document.querySelector("[data-header-menu-open]"),s=document.querySelector("[data-header-menu-close]"),a=document.querySelectorAll("[data-menu-close]");t.addEventListener("click",()=>{e.classList.add("active"),document.body.style.overflow="hidden"}),s.addEventListener("click",()=>{n()}),a.forEach(o=>{o.addEventListener("click",()=>{n()})}),e.addEventListener("click",o=>{o.target===e&&n()});function n(){e.classList.remove("active"),document.body.style.overflow=""}});const g={main:document.querySelector("main"),modalContainer:document.querySelector(".js-modal-backdrop"),modalContent:document.querySelector(".js-modal-content"),openModalBtn:document.querySelector(".open-modal-btn"),closeModalBtn:document.querySelector(".js-close-modal-btn")};let f=null;const E={modalBackdrop:g.modalContainer,modalContent:g.modalContent,closeBtn:g.closeModalBtn,mouseDownOnBackdrop:!1,getFocusableNodes(){return this.modalBackdrop.querySelectorAll("a, button, input, textarea")},openModal(e){f=document.activeElement,this.modalContent.innerHTML=e.getMarkup(),e.listnerHandler&&e.listnerHandler(),this.modalBackdrop.classList.remove("is-hidden"),requestAnimationFrame(()=>{this.modalBackdrop.classList.add("is-open")}),document.body.classList.add("modal-open");const t=this.getFocusableNodes();let s=null;for(const a of t){if(a.tagName==="INPUT"){s=a;break}s=t[1]}s==null||s.focus(),this.closeBtn.addEventListener("click",this.closeModal.bind(E)),this.modalBackdrop.addEventListener("mousedown",a=>{this.mouseDownOnBackdrop=a.target===this.modalBackdrop}),this.modalBackdrop.addEventListener("mouseup",a=>{this.mouseDownOnBackdrop&&a.target===this.modalBackdrop&&this.closeModal(),this.mouseDownOnBackdrop=!1}),document.addEventListener("keydown",a=>{this.disableNotModalActions(a)})},closeModal(){this.modalBackdrop.classList.remove("is-open"),setTimeout(()=>{this.modalBackdrop.classList.add("is-hidden")},250),document.body.classList.remove("modal-open"),g.main.getAttribute("aria-hidden"===!1)&&(f==null||f.focus())},disableNotModalActions(e){if(e.key==="Escape"&&this.modalBackdrop.classList.contains("is-open")&&this.closeModal(),e.key==="Tab"&&this.modalBackdrop.classList.contains("is-open")){const t=this.getFocusableNodes(),s=t[0],a=t[t.length-1];e.shiftKey&&document.activeElement===s&&(e.preventDefault(),a.focus()),!e.shiftKey&&document.activeElement===a&&(e.preventDefault(),s.focus())}}},P={openSuccessAlert(e){this.successAllert(e),document.querySelector(".swal2-container").querySelector("button.swal2-confirm").focus()},successAllert(e){D.fire({title:"Ми отримали вашого листа!",icon:"success",text:e})},errorAlert(e){D.fire({icon:"error",title:"Oops...",html:e})}};d.defaults.baseURL="https://paw-hut.b.goit.study";async function J(e){var s,a;const t="/api/orders";try{return(await d.post(d.defaults.baseURL+t,e)).data}catch(n){P.errorAlert((a=(s=n.response)==null?void 0:s.data)==null?void 0:a.message)}}const H={animalId:null,getMarkup(){return`<form class="order-form js-order-form">
                <h2 class="order-title">Залишіть заявку на знайомство</h2>
                <div class='order-form-name-block'>
                <label for="name">Ім’я*</label>
                <input type="text" id="name" name="name" placeholder="Андрій">
                <span class="validation js-name-validation">Максимальна довжина ${this.validation.lengthLimits.name} символи</span></div>
                 <div class='order-form-phone-block'>
                <label for="phone">Телефон*</label>
                <input type="text" name="phone" id="phone" placeholder="38 (095) 555 99 22">
                 <span class="validation js-phone-validation">Очікується ${this.validation.lengthLimits.phone} цифр</span></div>
                 <div class='order-form-comment-block'><label for="comment">Коментар</label>
                <textarea type="textarea" name="comment" id="comment" placeholder="Напишіть ваш коментар"></textarea>
                 <span class="validation js-comment-validation">Максимальна довжина ${this.validation.lengthLimits.comment} символів</span></div>
               <div class='order-controllers-container'> <button type="submit" class="dark">Надіслати</button></div>
          <div class='modal-loader-wrapper  js-loader-wrapper hidden'><span class="loader"></span></div>  
               </form>
               `},getFormEle(){return document.querySelector(".js-order-form")},listnerHandler(){this.formSubmitHandler(),this.formInputHandler(),this.formFocusInHandler(),this.formFocusOutHandler()},formSubmitHandler(){const e=this.getFormEle();e.addEventListener("submit",async t=>{t.preventDefault();const s=new FormData(e),a={name:s.get("name").trim(),phone:s.get("phone").trim().replace(/\D+/g,""),animalId:this.animalId};if(s.get("comment").trim()&&(a.comment=s.get("comment").trim()),!this.validation.formValidation(a)){if(this.validation.message.notEmpty.name){const i=e.querySelector(".js-name-validation");e.elements.name.classList.add("input-error"),i.classList.add("error")}if(this.validation.message.notEmpty.phone){const i=e.querySelector(".js-phone-validation");e.elements.phone.classList.add("input-error"),i.classList.add("error")}return}N.showLoader();const o=await J(a);N.hideLoader(),t.target.reset(),E.closeModal(),P.openSuccessAlert(`${a.name}, ${o.animalName} з нетерпінням чекає на зустріч.`)})},formInputHandler(){const e=this.getFormEle();e.addEventListener("input",t=>{let s,a,n;switch(t.target){case e.elements.name:n="name",a=this.validation.lengthLimits.name,s=()=>this.validation.checkMaxLength("name",t.target.value);break;case e.elements.phone:n="phone",a=this.validation.lengthLimits.phone,s=()=>this.validation.checkPhone(t.target.value);break;case e.elements.comment:n="comment",a=this.validation.lengthLimits.comment,s=()=>this.validation.checkMaxLength("comment",t.target.value);break}t.target.classList.remove("input-error");const o=e.querySelector(`.js-${n}-validation`);let i=t.target.value;n==="phone"&&(i=this.validation.cleanPhoneValue(t.target.value),t.target.value=this.validation.formatPhone(i)),o.innerHTML=`${Math.min(i.length,this.validation.lengthLimits.phone)} з ${a}`,s()?(t.target.classList.remove("input-error"),o.classList.remove("error")):(t.target.classList.add("input-error"),o.classList.add("error"))})},formFocusInHandler(){const e=this.getFormEle();e.addEventListener("focusin",async t=>{(t.target===e.elements.name||t.target===e.elements.phone||t.target===e.elements.comment)&&t.target.classList.remove("input-error")})},formFocusOutHandler(){const e=this.getFormEle();e.addEventListener("focusout",async t=>{switch(t.target){case e.elements.phone:this.validation.checkPhone(t.target.value)||t.target.classList.add("input-error");break}})},validation:{lengthLimits:{name:32,phone:12,comment:500},message:{notEmpty:{name:"",phone:""},maxLength:{name:"",comment:""},content:{phone:""}},cleanPhoneValue(e){return e.trim().replace(/\D+/g,"")},checkIsNotEmpty(e,t){let s="";if(t===""){switch(e){case"name":s="І'мя";break;case"phone":s="Телефон";break}return this.message.notEmpty[e]=`Заповніть, будь ласка, ${s}.`,!1}return this.message.notEmpty[e]="",!0},checkMaxLength(e,t){let s="",a="";switch(e){case"name":s=this.lengthLimits.name,a="І'мя";break;case"comment":s=this.lengthLimits.comment,a="Коментаря";break}return t.length>s?(this.message.maxLength[e]=`Максимальна довжина ${a} не має перевищувати ${s} символів.`,!1):(this.message.maxLength[e]="",!0)},checkPhone(e){return this.cleanPhoneValue(e).match(/^[0-9]{12}$/)?(this.message.content.phone="",!0):(this.message.content.phone=`Телефон повинен містити ${this.lengthLimits.phone} цифр.`,!1)},formValidation(e){const t=this.checkIsNotEmpty("name",e.name)&&this.checkMaxLength("name",e.name),s=this.checkIsNotEmpty("phone",e.phone)&&this.checkPhone(e.phone),a=e.comment?this.checkMaxLength("comment",e.comment):!0,n=t&&s&&a;if(!n){const o=this.message.notEmpty.name||this.message.maxLength.name,i=this.message.notEmpty.phone||this.message.content.phone,r=this.message.maxLength.comment,c=`${o?o+"<br>":""}
          ${i?i+"<br>":""}
         ${r?r+"<br>":""}`;P.errorAlert(c)}return n},formatPhone(e){let t="";return e.length>0&&(t+=e.slice(0,2)),e.length>2&&(t+=" ("+e.slice(2,5)),e.length>5&&(t+=") "+e.slice(5,8)),e.length>8&&(t+=" "+e.slice(8,10)),e.length>10&&(t+=" "+e.slice(10,12)),t}}},N={getLoaderEle(){return document.querySelector(".js-loader-wrapper")},showLoader(){this.getLoaderEle().classList.remove("hidden")},hideLoader(){this.getLoaderEle().classList.add("hidden")}},x={animalId:"",data:{},getMarkup(){return`<div class="animal-details-container js-animal-details-container">
    <div class="animal-details-img-container">
    <img src=${this.data.image}></div>
    <div class="animal-details-content-container">
    <div class="grid-header">   <p class="animal-details-species">${this.data.species}</p>
    <h3 class="animal-details-name">${this.data.name}</h3>
    <ul class="animal-details-age-and-gender-list">
    <li class="animal-details-age">${this.data.age}</li>
    <li class="animal-details-gender">${this.data.gender}</li> </ul></div>
   <div class="grid-description"><h4>Опис:</h4>
    <p class="animal-details-description">${this.data.description}</p>
    <h4>Здоров’я:</h4>
    <p class="animal-details-healthStatus">${this.data.healthStatus}</p>
    <h4>Поведінка:</h4>
    <p class="animal-details-behavior">${this.data.behavior}</p></div>
    <div class='animal-details-controllers-container grid-button'> 
    <button type="button" class="dark js-go-to-order-btn">Взяти додому</button>
    </div>
    </div>
    </div>`},listnerHandler(){document.querySelector(".js-go-to-order-btn").addEventListener("click",async t=>{H.animalId=this.animalId,E.openModal(H)})}},q=document.querySelector(".js-pet-list-categories"),S=document.querySelector(".js-pets-list-cards"),b=document.querySelector(".js-showmore-btn"),_=document.querySelector(".js-loader");let h=[],p="all",L=1,l=0,m=0;const y=z();let v=0,w=null;async function Q(){try{const e=await d.get("https://paw-hut.b.goit.study/api/categories");X(e.data)}catch{I.error({title:"Помилка",message:"Неможливо завантажити категорії"})}}async function A({category:e="all",page:t=1}={}){try{const s={page:t,limit:y};return e!=="all"&&(s.categoryId=e),(await d.get("https://paw-hut.b.goit.study/api/animals",{params:s})).data}catch{return I.error({title:"Помилка",message:"Неможливо завантажити тварин"}),{animals:[],totalItems:0}}}function X(e){const t=`
    <li>
      <button class="category-btn active" data-category-id="all">
        Всі
      </button>
    </li>`;q.innerHTML=t+e.map(Z).join("")}function Z(e){return`
    <li>
      <button class="category-btn" data-category-id="${e._id}">
        ${e.name}
      </button>
    </li>`}function k(){const e=z(),t=h.slice(l,l+e);if(!t.length){M();return}S.insertAdjacentHTML("beforeend",t.map(ee).join("")),l+=t.length,M()}function ee(e){var t;return`<li class="petlist-pet-card" data-id="${e._id}">
      <img
        class="pet-image"
        src="${e.image||"images/placeholder.jpg"}"
        alt="${e.name}"
        loading="lazy"
      >

      <div class="petlist-pet-content">
        <div class="petlist-pet-content-about">
        <p class="petlist-pet-breed">${e.species}</p>
            
            <h3 class="petlist-card-tag">${e.name}</h3>

            <ul class="petlist-pet-categories">
    ${(t=e.categories)!=null&&t.length?e.categories.map(s=>`<li class="petlist-pet-category">${s.name}</li>`).join(""):'<li class="petlist-pet-category">No category</li>'}
  </ul>
            </div>
    
            <ul class="petlist-pet-meta">
              <li class="petlist-pet-meta-item">${e.gender}</li>
              <li class="petlist-pet-meta-item">${e.age}</li>
            </ul>
        </div>

        <p class="petlist-pet-description">
          ${e.shortDescription}
        </p>

        <button class="pet-more-btn js-pet-more-btn" type="button">Дізнатися більше</button>
      </div>
    </li>`}async function U(){C(),L=1,l=0,S.innerHTML="";const e=await A({category:p,page:L});h=e.animals,m=e.totalItems,ne(m),k(),T()}async function te(){if(l<h.length){k();return}if(l>=m){W();return}C(),L+=1;const e=await A({category:p,page:L});h.push(...e.animals),k(),T()}document.addEventListener("DOMContentLoaded",async()=>{await U(),await Q()});q.addEventListener("click",async e=>{const t=e.target.closest(".category-btn");if(!t)return;const s=t.dataset.categoryId;s!==p&&(p=s,q.querySelectorAll(".category-btn").forEach(a=>a.classList.remove("active")),t.classList.add("active"),await U(),se())});b.addEventListener("click",te);S.addEventListener("click",e=>{const t=e.target.closest(".js-pet-more-btn");if(!t)return;const s=t.closest(".petlist-pet-card"),a=h.find(n=>n._id===s.dataset.id);a&&(x.animalId=a._id,x.data=a,E.openModal(x))});function z(){return window.innerWidth>=1440?9:8}function M(){if(window.innerWidth>=1440){b.classList.add("hidden");return}b.classList.toggle("hidden",l>=m)}function C(){_.classList.remove("hidden"),W()}function T(){_.classList.add("hidden"),M()}function W(){b.classList.add("hidden")}function se(){w&&w.reset(m)}function ne(e){if(window.innerWidth<768)return;v=Math.ceil(e/y);const t=document.querySelector(".js-pagination");if(!t)return;const s={totalItems:e,itemsPerPage:y,visiblePages:3,centerAlign:!0,template:{page:'<button class="pagination-btn pagination-page">{{page}}</button>',currentPage:'<button class="pagination-btn pagination-page active">{{page}}</button>',moveButton:'<button class="pagination-btn pagination-arrow tui-{{type}}"><svg class="pagination-arrow-icon" width="24" height="24" viewBox="0 0 24 24"><use href="./sprite.svg#icon-arrow-back"></use></svg></button>',disabledMoveButton:'<button class="pagination-btn pagination-arrow tui-is-disabled tui-{{type}}"><svg class="pagination-arrow-icon" width="24" height="24" viewBox="0 0 24 24"><use href="./sprite.svg#icon-arrow-back"></use></svg></button>',firstPage:'<button class="pagination-btn pagination-page">1</button>',lastPage:'<button class="pagination-btn pagination-page">{{totalPages}}</button>'}};w=new V(t,s),setTimeout(()=>{const a=document.querySelector(".pagination .tui-first"),n=document.querySelector(".pagination .tui-last"),o=document.querySelectorAll(".pagination .tui-next use"),i=document.querySelector(".tui-next-is-ellip");v<=4&&i&&(i.style.display="none"),v<=3?(a&&(a.style.display="none"),n&&(n.style.display="none")):(a&&(a.style.display="none"),n&&(n.textContent=v)),o.forEach(r=>{r.setAttribute("href","./sprite.svg#icon-arrow-forward")})},0),w.on("afterMove",async a=>{const n=a.page,o=Math.ceil(m/y),i=document.querySelector(".pagination .tui-first"),r=document.querySelector(".pagination .tui-last");o<=3?(i&&(i.style.display="none"),r&&(r.style.display="none")):(i&&(i.style.display=n<=2?"none":"flex",i.textContent="1"),r&&(r.style.display=n>=o-1?"none":"flex",r.textContent=o));const c=document.querySelector(".tui-prev-is-ellip"),u=document.querySelector(".tui-next-is-ellip");n<=3?c&&(c.style.display="none"):c&&(c.style.display="flex"),r.textContent-n<3?u&&(u.style.display="none"):u&&(u.style.display="flex"),document.querySelectorAll(".pagination .tui-next use").forEach(K=>{K.setAttribute("href","./sprite.svg#icon-arrow-forward")}),C();const F=await A({category:p,page:n});h=F.animals,m=F.totalItems,l=0,S.innerHTML="",k(),T()})}j.use([G,Y]);const ae=new j(".about-slider",{slidesPerView:1,allowTouchMove:!0,touchStartPreventDefault:!1,simulateTouch:!0,grabCursor:!0,navigation:{nextEl:".about-btn-next",prevEl:".about-btn-prev"},pagination:{el:".about-pagination",clickable:!0,dynamicBullets:!1,renderBullet:function(e,t){return`<span class="${t}"></span>`}},on:{init:function(){B(this)},slideChange:function(){B(this)}}});function B(e){const t=e.pagination.bullets,s=e.activeIndex;if(!(window.innerWidth<=768)){t.forEach(n=>{n.style.width="8px",n.style.height="8px"});return}t.forEach((n,o)=>{n.style.width="4px",n.style.height="4px",o===s?(n.style.width="8px",n.style.height="8px"):(o===s-1||o===s+1)&&(n.style.width="6px",n.style.height="6px")})}window.addEventListener("resize",()=>B(ae));const O=document.querySelectorAll(".faq-accordion-header");O.forEach(e=>{e.addEventListener("click",()=>{const t=e.querySelector(".faq-accordion-icon"),s=e.nextElementSibling;O.forEach(a=>{if(a!==e){const n=a.querySelector(".faq-accordion-icon"),o=a.nextElementSibling;n.classList.remove("faq-accordion-icon--rotated"),o.classList.remove("faq-accordion-content--visible")}}),t.classList.toggle("faq-accordion-icon--rotated"),s.classList.toggle("faq-accordion-content--visible")})});const R=document.querySelector(".swiper-wrapper.success-stories-lists");document.querySelector(".success-stories-button-next");document.querySelector(".success-stories-button-prev");document.querySelector(".success-stories-swiper-pagination");const oe="https://paw-hut.b.goit.study",ie="/api/feedbacks";d.defaults.baseURL=oe;async function re({page:e=1,limit:t=6}={}){try{return(await d.get(ie,{params:{page:e,limit:t}})).data}catch(s){throw console.error("❌ Error receiving reviews:",s),s}}function ce(e){const t=e.map(({author:s,rate:a,description:n})=>{const o=Math.floor(a),i=a%1===.5,r=`rating value-${o} ${i?"half":""}`,c=`
      <svg class="icon star-empty"><use href="./sprite.svg#icon-star-outline"></use></svg>
      <svg class="icon star-half"><use href="./sprite.svg#icon-star-half"></use></svg>
      <svg class="icon star-filled"><use href="./sprite.svg#icon-star-filled"></use></svg>
    `,u=Array.from({length:5}).map(()=>`<div class="star">${c}</div>`).join("");return`
      <li class="swiper-slide success-stories-list">
        <div class="${r} star-icon color-default">
          <div class="star-container">
            ${u}
          </div>
        </div>
        <p class="success-stories-list-review">${n}</p>
        <p class="success-stories-list-author">${s}</p>
      </li>
    `}).join("");R.innerHTML="",R.insertAdjacentHTML("beforeend",t)}function le(){new j(".success-stories-swiper",{slidesPerView:1,spaceBetween:32,navigation:{nextEl:".success-stories-button-next",prevEl:".success-stories-button-prev"},pagination:{el:".success-stories-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2}}})}async function de(){try{const e=await re(),{feedbacks:t}=e;ce(t),le()}catch{I.error({title:"Error",message:"Failed to load reviews",position:"topRight"})}}de();const $=document.querySelector(".scroll-to-top");window.addEventListener("scroll",function(){window.scrollY>300?$.classList.add("visible"):$.classList.remove("visible")});$.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.js.map
